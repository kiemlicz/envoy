{# {% import_yaml "defaults.yaml" as defaults %} #}

{% set version = '3.5.4' %}
{% set url = 'http://ftp.ps.pl/pub/apache/maven/maven-3/' + version + '/binaries/apache-maven-' + version + '-bin.tar.gz' %}
{% set maven = salt['grains.filter_by']({
    'default': {
        'download_url': url,
        'destination_dir': '/opt',
        'generic_link': '/opt/default-maven',
        'owner': 'root',
        'exports_file': '/etc/zsh/zshrc',
        'environ_variable': 'M2_HOME',
        'path_inside': 'bin',
        'source_hash': "sha256=ce50b1c91364cb77efe3776f756a6d92b76d9038b0a0782f7d53acf1e997a14d"
    },
    'Windows': {
        'download_url': url,
        'destination_dir': 'C:\Program Files',
        'generic_link': 'C:\Program Files\default-maven',
        'owner': 'root',
        'environ_variable': 'M2_HOME',
        'path_inside': 'bin'
    },
}, merge=salt['pillar.get']('maven')) %}
