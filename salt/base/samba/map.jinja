{% set samba = salt['grains.filter_by']({
    'Debian': {
        'pkgs': ["libpam-mount", "samba"],
        'pam_mount_conf': '/etc/security/pam_mount.conf.xml',
        'pam_mount_conf_managed': 'salt://samba/pam_mount.conf.xml',
        'service_name': salt['grains.filter_by']({
            'lenny': 'samba',
            'squeeze': 'samba',
            'wheezy': 'samba',
            'jessie': 'smbd',
            'default': 'smbd',
        }, grain='oscodename'),
    },
    'Windows': {
    }
}, merge=salt['pillar.get']('samba')) %}
