{% import_yaml "dropbox/defaults.yaml" as defaults %}

{% set os = salt['grains.get']('lsb_distrib_id') %}
{% set dist_codename = salt['grains.get']('lsb_distrib_codename') %}

{% set dropbox = salt['grains.filter_by']({
    'default': {
        'repo_entries': [
            "deb http://linux.dropbox.com/" + os.lower() + " " + dist_codename + " main"
        ],
        'file': '/etc/apt/sources.list.d/dropbox.list'
    }
}, merge=salt['pillar.get']('dropbox', default=defaults.dropbox, merge=True)) %}
